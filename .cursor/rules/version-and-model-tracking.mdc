---
description: Version string and AI model tracking rules for all agents
alwaysApply: true
---

# Version & Model Tracking

## Version Format

Version uses the `r000000NNN` format â€” a strictly sequential release number from Supabase. Each push to `main` auto-increments. Do NOT use the old `vYYMMDD.NN` format.

## After Push: Always Display Version

After every successful push, include the current version from `version.json`:

> `r000000NNN [model]`

Do not skip version reporting after a push.

## Model Self-Reporting

When running `bump-version.sh`, pass `--model` with the active model code:

```bash
./scripts/bump-version.sh --model o4.6
```

Model codes:
- `o4.6` = Claude Opus 4.6
- `s4.0` = Claude Sonnet 4
- `g2.5` = Gemini 2.5
- `g4o` = GPT-4o
- `modl-a` = Cursor Auto
- `cur` = Cursor (unknown model)
- `ci` = GitHub Actions CI

If exact model is unknown, use the closest identifier and still report it.

## Machine Name Requirement

Always set the computer name for version metadata before bumping:

- Prefer `AAP_MACHINE_NAME` env var, or
- Set project-level `.machine-name` file

The post-push report must include `version.json.machine`.

## Deploy Workflow

Version is bumped automatically by CI on push to main. Do NOT run `bump-version.sh` locally before pushing.

```bash
git add -A
git commit -m "Description"
git push origin main
```

Post-push response format (at end):

- `Version: <version.json.version>`
- `Machine: <version.json.machine>`
- `Model: <version.json.model>`
- `Links: [Label](URL)` for 1-2 most relevant destinations
